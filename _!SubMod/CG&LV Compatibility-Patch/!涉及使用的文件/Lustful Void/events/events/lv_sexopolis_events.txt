################################
###     Sexopolis Events     ###
################################

# Sexopolis Origin #
namespace = lv_sworld_origin_event

event = {
	id = lv_sworld_origin_event.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_playable_country = {
			limit = { has_origin = origin_lv_sworld }
			country_event = { id = lv_sworld_origin_event.10 }
		}
	}
}

country_event = {
	id = lv_sworld_origin_event.10
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		give_technology = { tech = tech_lv_sex_supply message = no }
		give_technology = { tech = tech_lv_lactation_drugs message = no }
		capital_scope = {
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			
			while = {
				count = 2
				add_district = district_lv_sworld_city
			}
			while = {
				count = 1
				add_district = district_lv_sworld_gem_incubation
			}
			while = {
				count = 2
				add_district = district_lv_sworld_red_light
			}
			while = {
				count = 2
				add_district = district_lv_sworld_milk
			}
			
			if = {
				limit = { owner = { is_regular_empire = yes } }
				add_building = building_capital
				if = {
					limit = { owner = { is_spiritualist = no } }
					add_building = building_bureaucratic_1
				}
				if = {
					limit = {
						owner = {
							is_spiritualist = yes
							OR = {
								has_valid_civic = civic_death_cult
								has_valid_civic = civic_death_cult_corporate
							}
						}
					}
					add_building = building_sacrificial_temple_1
				}
				if = {
					limit = {
						owner = {
							is_spiritualist = yes
							NOT = { has_valid_civic = civic_death_cult }
						}
					}
					add_building = building_temple
				}
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					if = {
						limit = {
							owner = {
								has_valid_civic = civic_reanimated_armies
							}
						}
						add_building = building_dread_encampment
	
						solar_system = { #Necromancers do not give engineering. So make sure there's some readily-accessible engineering
							random_system_planet = {
								limit = {
									has_deposit_for = shipclass_research_station
									has_deposit = d_engineering_5
								}
								# Total size 15 deposit as the Irreparable Damage is normally a size 5 and non-Shattered Ring starts get an additional two size 6 deposits.
								add_deposit = d_engineering_10
							}
						}
					}
					else = {
						add_building = building_lv_sexology_labs
					}
				}
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_permanent_employment
						}
					}
					add_building = building_posthumous_employment_center
				}
				add_building = building_lv_sapient_dairy_ranch
			}
			if = {
				limit = { owner = { is_hive_empire = yes } }
				add_building = building_hive_capital
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					add_building = building_lv_sexology_labs
				}
				add_building = building_hive_node
				if = { 
					limit = { 
						owner = { has_origin = origin_progenitor_hive }
					}
					add_building = building_offspring_nest
				}
				else = {
					add_building = building_spawning_pool
				}
				add_building = building_lv_sapient_dairy_ranch
			}
			if = {
				limit = { owner = { is_machine_empire = yes } }
				add_building = building_machine_capital
				add_building = building_machine_assembly_plant
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					add_building = building_lv_sexology_labs
				}
				add_building = building_lv_sapient_dairy_ranch
				add_building = building_organic_sanctuary
			}
			
			add_deposit = d_lv_sworld_supply
			add_deposit = d_lv_compact_industrial_area
			add_deposit = d_lv_cum_blocker_1
			add_deposit = d_lv_cum_blocker_2
			add_deposit = d_lv_cum_blocker_3
			set_planet_flag = lv_sex_supply_added
			
			if = {
				limit = {
					owner = {
						is_lithoid_empire = yes
						NOT = { has_civic = civic_hive_devouring_swarm }
					}
				}
				while = {
					count = 4
					add_deposit = d_hibernating_lithoids
				}
			}
			if = {
				limit = {
					owner = {
						is_lithoid_empire = yes
						has_civic = civic_hive_devouring_swarm
					}
				}
				while = {
					count = 2
					add_deposit = d_hibernating_lithoids
				}
			}
		}
	}
}

# Sexopolis Ringworld Origin #
namespace = lv_sring_origin_event

event = {
	id = lv_sring_origin_event.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_playable_country = {
			limit = { has_origin = origin_lv_sring }
			country_event = { id = lv_sring_origin_event.10 }
		}
	}
}

country_event = {
	id = lv_sring_origin_event.10
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		give_technology = { tech = tech_lv_sex_supply message = no }
		give_technology = { tech = tech_lv_lactation_drugs message = no }
		capital_scope = {
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes
			
			while = {
				count = 2
				add_district = district_lv_sringworld_city
			}
			while = {
				count = 1
				add_district = district_lv_sringworld_gem_incubation
			}
			while = {
				count = 2
				add_district = district_lv_sringworld_red_light
			}
			while = {
				count = 2
				add_district = district_lv_sringworld_milk
			}
			
			if = {
				limit = { owner = { is_regular_empire = yes } }
				add_building = building_capital
				if = {
					limit = { owner = { is_spiritualist = no } }
					add_building = building_bureaucratic_1
				}
				if = {
					limit = {
						owner = {
							is_spiritualist = yes
							OR = {
								has_valid_civic = civic_death_cult
								has_valid_civic = civic_death_cult_corporate
							}
						}
					}
					add_building = building_sacrificial_temple_1
				}
				if = {
					limit = {
						owner = {
							is_spiritualist = yes
							NOT = { has_valid_civic = civic_death_cult }
						}
					}
					add_building = building_temple
				}
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					if = {
						limit = {
							owner = {
								has_valid_civic = civic_reanimated_armies
							}
						}
						add_building = building_dread_encampment
	
						solar_system = { #Necromancers do not give engineering. So make sure there's some readily-accessible engineering
							random_system_planet = {
								limit = {
									has_deposit_for = shipclass_research_station
									has_deposit = d_engineering_5
								}
								# Total size 15 deposit as the Irreparable Damage is normally a size 5 and non-Shattered Ring starts get an additional two size 6 deposits.
								add_deposit = d_engineering_10
							}
						}
					}
					else = {
						add_building = building_lv_sexology_labs
					}
				}
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_permanent_employment
						}
					}
					add_building = building_posthumous_employment_center
				}
				add_building = building_lv_sapient_dairy_ranch
			}
			if = {
				limit = { owner = { is_hive_empire = yes } }
				add_building = building_hive_capital
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					add_building = building_lv_sexology_labs
				}
				add_building = building_hive_node
				if = { 
					limit = { 
						owner = { has_origin = origin_progenitor_hive }
					}
					add_building = building_offspring_nest
				}
				else = {
					add_building = building_spawning_pool
				}
				add_building = building_lv_sapient_dairy_ranch
			}
			if = {
				limit = { owner = { is_machine_empire = yes } }
				add_building = building_machine_capital
				add_building = building_machine_assembly_plant
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					add_building = building_lv_sexology_labs
				}
				add_building = building_lv_sapient_dairy_ranch
				add_building = building_organic_sanctuary
			}
			
			add_deposit = d_lv_sring_supply
			add_deposit = d_decrepit_tunnels_1
			add_deposit = d_decrepit_tunnels_2
			add_deposit = d_decrepit_tunnels_3
			add_deposit = d_lv_cum_blocker_3
			set_planet_flag = lv_sex_supply_added
			
			if = {
				limit = {
					owner = {
						is_machine_empire = yes
						OR = { 
							has_civic = civic_machine_assimilator 
							has_civic = civic_machine_servitor 
						}
					}
				}                
				while = {
					count = 2
					add_deposit = d_segment_rubble_1
					add_deposit = d_segment_rubble_2
				}
			}
			if = {
				limit = {
					owner = {
						is_lithoid_empire = yes
						NOT = { has_civic = civic_hive_devouring_swarm }
					}
				}
				while = {
					count = 4
					add_deposit = d_hibernating_lithoids
				}
			}
			if = {
				limit = {
					owner = {
						is_lithoid_empire = yes
						has_civic = civic_hive_devouring_swarm
					}
				}
				while = {
					count = 2
					add_deposit = d_hibernating_lithoids
				}
			}
		}
	}
}

# Tentacle Symbiosis Origin #
namespace = lv_stentacle_origin_event

event = {
	id = lv_stentacle_origin_event.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_playable_country = {
			limit = { has_origin = origin_lv_stentacle }
			country_event = { id = lv_stentacle_origin_event.10 }
		}
	}
}

country_event = {
	id = lv_stentacle_origin_event.10
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		give_technology = { tech = tech_lv_tentacle_symbiosis message = no }
		give_technology = { tech = tech_lv_stentacle_world message = no}
		add_resource = { food = 2000 }
		if = {
			limit = { is_gestalt = no }
			add_resource = { consumer_goods = 500 }
		}
		capital_scope = {
			remove_all_districts = yes
			remove_all_buildings = yes
			
			while = {
				count = 3
				add_district = district_lv_stentacle_city
			}
			while = {
				count = 2
				add_district = district_lv_stentacle_gem_incubation
			}
			while = {
				count = 3
				add_district = district_lv_stentacle_friction_tunnel
			}
			while = {
				count = 3
				add_district = district_lv_stentacle_milk
			}
			
			if = {
				limit = { owner = { is_regular_empire = yes } }
				add_building = building_capital
				if = {
					limit = { owner = { is_spiritualist = no } }
					add_building = building_bureaucratic_1
				}
				if = {
					limit = {
						owner = {
							is_spiritualist = yes
							OR = {
								has_valid_civic = civic_death_cult
								has_valid_civic = civic_death_cult_corporate
							}
						}
					}
					add_building = building_sacrificial_temple_1
				}
				if = {
					limit = {
						owner = {
							is_spiritualist = yes
							NOT = { has_valid_civic = civic_death_cult }
						}
					}
					add_building = building_temple
				}
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					if = {
						limit = {
							owner = {
								has_valid_civic = civic_reanimated_armies
							}
						}
						add_building = building_dread_encampment
	
						solar_system = { #Necromancers do not give engineering. So make sure there's some readily-accessible engineering
							random_system_planet = {
								limit = {
									has_deposit_for = shipclass_research_station
									has_deposit = d_engineering_5
								}
								# Total size 15 deposit as the Irreparable Damage is normally a size 5 and non-Shattered Ring starts get an additional two size 6 deposits.
								add_deposit = d_engineering_10
							}
						}
					}
					else = {
						add_building = building_lv_sexology_labs
					}
				}
				if = {
					limit = {
						owner = {
							has_valid_civic = civic_permanent_employment
						}
					}
					add_building = building_posthumous_employment_center
				}
				add_building = building_lv_sapient_dairy_ranch
			}
			if = {
				limit = { owner = { is_hive_empire = yes } }
				add_building = building_hive_capital
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					add_building = building_lv_sexology_labs
				}
				add_building = building_hive_node
				if = { 
					limit = { 
						owner = { has_origin = origin_progenitor_hive }
					}
					add_building = building_offspring_nest
				}
				else = {
					add_building = building_spawning_pool
				}
				add_building = building_lv_sapient_dairy_ranch
			}
			if = {
				limit = { owner = { is_machine_empire = yes } }
				add_building = building_machine_capital
				add_building = building_machine_assembly_plant
				if = {
					limit = {
						owner = {
							is_low_tech_start = no
						}
					}
					add_building = building_lv_sexology_labs
				}
				add_building = building_lv_sapient_dairy_ranch
				add_building = building_organic_sanctuary
			}
			
			add_deposit = d_lv_tentacle_symbiosis
			add_deposit = d_lv_tentacle_symbiosis
			add_deposit = d_lv_cum_blocker_4
			add_deposit = d_lv_cum_blocker_5
			add_deposit = d_lv_cum_blocker_6
			add_deposit = d_lv_cum_blocker_4
			add_deposit = d_lv_cum_blocker_5
			add_deposit = d_lv_cum_blocker_6
			add_deposit = d_lv_cum_blocker_1
			add_deposit = d_lv_stentacle_core
			if = {
				limit = {
					owner = {
						is_lithoid_empire = yes
						NOT = { has_civic = civic_hive_devouring_swarm }
					}
				}
				while = {
					count = 4
					add_deposit = d_hibernating_lithoids
				}
			}
			if = {
				limit = {
					owner = {
						is_lithoid_empire = yes
						has_civic = civic_hive_devouring_swarm
					}
				}
				while = {
					count = 2
					add_deposit = d_hibernating_lithoids
				}
			}
		}
	}
}

# Sexopolis Creation #
namespace = lv_sworld_creation

planet_event = {
	id = lv_sworld_creation.1
	title = lv_sworld_creation.1.name
	desc = lv_sworld_creation.1.desc
	picture = GFX_evt_city_planet
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		is_planet_class = pc_lv_sworld
	}

	option = {
		name = lv_sworld_creation.1.a
	}
}

###