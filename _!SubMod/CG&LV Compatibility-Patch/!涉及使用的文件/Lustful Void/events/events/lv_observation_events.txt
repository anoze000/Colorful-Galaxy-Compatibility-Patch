namespace = lv_observation_events

##################################
###     Observation Events     ###
##################################

@tier1influencecontact = 7
@tier1influencecontactxenophile = 8
@tier1influencecontactmin = 20
@tier1influencecontactmax = 80

@tier2influencecontact = 10
@tier2influencecontactxenophile = 12
@tier2influencecontactmin = 40
@tier2influencecontactmax = 100

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000
@tier5materialreward = 48
@tier5materialmin = 700
@tier5materialmax = 4000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300
@tier5influencereward = 36
@tier5influencemin = 250
@tier5influencemax = 500
@tier6influencereward = 48
@tier6influencemin = 300
@tier6influencemax = 600

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500
@tier5researchreward = 48
@tier5researchmin = 300
@tier5researchmax = 1000

@tier1unityreward = 6
@tier1unitymin = 40
@tier1unitymax = 100
@tier2unityreward = 12
@tier2unitymin = 80
@tier2unitymax = 175
@tier3unityreward = 18
@tier3unitymin = 125
@tier3unitymax = 250
@tier4unityreward = 24
@tier4unitymin = 150
@tier4unitymax = 300

###

###########
# Passive #
###########

### Sexy Rogue Scientists Chain

# Missing Sexy Scientists (Gatekeeper) #
situation_event = {
	id = lv_observation_events.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			NOT = {
				has_country_flag = lv_observation_missing_sexy_scientists_fired
			}

			is_regular_pre_ftl = yes
			is_pre_industrial = yes

			capital_scope = {
				has_observation_outpost = yes
				observation_outpost = { has_mission = passive_observation }
				observation_outpost_owner = {
					is_ai = no
					is_gestalt = no
					NOT = { has_country_flag = lv_missing_sexy_scientist_chain }
				}
			}
		}
	}
	
	immediate = {
		owner = {
			set_country_flag = lv_observation_missing_sexy_scientists_fired
			save_event_target_as = pre_ftl_country
			
			capital_scope = {
				save_event_target_as = pre_ftl_planet
				set_planet_flag = lv_missing_sexy_scientists_planet
				observation_outpost_owner = {
					country_event = { id = lv_observation_events.2 }
				}
			}
		}
		set_situation_flag = has_ongoing_observation_event_chain
		# Setting this flag for the duration of the entire event chain
		# to prevent other observation events from interfering.
	}
}

# Missing Sexy Scientists #
country_event = {
	id = lv_observation_events.2
	title = lv_observation_events.2.name
	desc = lv_observation_events.2.desc
	picture = GFX_evt_landing_ship
	show_sound = event_ship_thrusters
	location = event_target:pre_ftl_planet
	
	is_triggered_only = yes
	
	immediate = {
		create_leader = {
			class = scientist
			species = owner_main_species
			name = random
		}
		last_created_leader = {
			exile_leader_as = lv_missing_sexy_scientist
			save_event_target_as = lv_missing_sexy_scientist
		}
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = yes
		}
	}
	
	option = {
		name = lv_observation_events.2.a
		hidden_effect = {
			random_list = {
				20 = {
					# Missing sexy scientist dies.
					country_event = { id = lv_observation_events.3 days = 10 random = 5 }
				}
				40 = {
					country_event = {
						id = lv_observation_events.5
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
					set_country_flag = lv_missing_sexy_scientist_chain
				}
				40 = {
					country_event = {
						id = lv_observation_events.22
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
					set_country_flag = lv_missing_sexy_scientist_captured_chain
				}
			}
		}
	}

	after = {
		custom_tooltip = cannot_reveal_tt
		custom_tooltip = cannot_dismantle_outpost_tt
	}
}

# Missing Sexy Scientists found Dead #
country_event = {
	id = lv_observation_events.3
	title = lv_observation_events.3.name
	desc = lv_observation_events.3.desc
	picture = GFX_evt_alien_nature
	show_sound = event_alien_nature
	location = event_target:pre_ftl_planet
	
	is_triggered_only = yes
	
	immediate = {
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
		event_target:pre_ftl_country = {
			random_situation = {
				limit = {
					is_situation_type = pre_ftl_tech_progress_situation
				}
				remove_situation_flag = has_ongoing_observation_event_chain
			}
		}
	}
	
	option = {
		name = lv_observation_events.3.a
		add_modifier = {
			modifier = missing_scientist
			days = 360
		}
	}
}

# Reports of a Sexy Cult #
country_event = {
	id = lv_observation_events.5
	title = lv_observation_events.5.name
	desc = lv_observation_events.5.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_dick_worship_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_missing_sexy_scientists_planet
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_missing_sexy_scientists_planet
		}
		event_target:pre_ftl_country = {
			set_timed_country_flag = {
				flag = new_industrial_age
				days = 360
			}
		}
	}
	
	option = {
		name = lv_observation_events.5.a
		custom_tooltip = advance_to_age_tt
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_equal_standing
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_cult_reported
				owner = {
					remove_pre_ftl_flags = yes
					change_government = {
						civics = {
							civic = civic_increasing_urbanization
							civic = civic_atmospheric_pollution
						}
					}
					set_pre_ftl_age_effect = { PRE_FTL_AGE = industrial_age }
					add_awareness = 30
				}
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.7
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
			event_target:pre_ftl_country = {
				remove_country_flag = new_industrial_age
			}
		}
	}
}

# Sexy Scientist Makes themself Known #
country_event = {
	id = lv_observation_events.7
	title = TRANSMISSION
	desc = lv_observation_events.7.desc
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = root
		planet_background = event_target:pre_ftl_planet
		graphical_culture = event_target:pre_ftl_planet
		room = event_target:pre_ftl_country
		city_level = event_target:pre_ftl_planet
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_cult_reported
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_cult_reported
			set_planet_flag = lv_sexy_scientist_revealed

			observation_outpost_owner = {
				country_event = {
					id = lv_observation_events.9
					# 5 ± 2.5 years
					days = 900
					random = 1800
				}
			}
		}
	}

	option = {
		name = lv_observation_events.7.a
		response_text = lv_observation_events.7.a.response
		is_dialog_only = yes
	}
	option = {
		name = lv_observation_events.7.b
		response_text = lv_observation_events.7.b.response
		is_dialog_only = yes
	}
	option = {
		name = lv_observation_events.7.c
		response_text = lv_observation_events.7.c.response
		is_dialog_only = yes
	}
	option = {
		name = GOODBYE
	}
}

# Rogue Sexy Scientist Consolidates Power #
country_event = {
	id = lv_observation_events.9
	title = lv_observation_events.9.name
	desc = lv_observation_events.9.desc
	picture = GFX_evt_enlightenment_failure
	show_sound = event_planetary_riot
	location = event_target:pre_ftl_planet
	trackable = yes
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_scientist_revealed
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_scientist_revealed
			owner = {
				set_pre_ftl_age_effect = { PRE_FTL_AGE = machine_age }
				set_awareness = 90
			}
		}
		event_target:pre_ftl_country = {
			set_timed_country_flag = {
				flag = new_machine_age
				days = 360
			}
		}
	}
	
	option = { # Support Operation
		name = lv_observation_events.9.a
		from = {
			enable_special_project = {
				name = "LV_EXTRACT_ROGUE_SEXY_SCIENTIST"
				location = event_target:pre_ftl_planet
				owner = root
			}
		}
	}
	option = { # Deny Operation
		name = lv_observation_events.9.b
	}
	
	after = {
		custom_tooltip = advance_to_age_tt
		tooltip = {
			add_awareness = 100
		}
		hidden_effect = {
			event_target:pre_ftl_country = {
				remove_country_flag = new_machine_age
			}
		}
	}
}

# Successful Extraction #
ship_event = {
	id = lv_observation_events.10
	title = lv_observation_events.10.name
	desc = lv_observation_events.10.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_ground_battle
	location = event_target:pre_ftl_planet
	
	is_triggered_only = yes
	
	option = {
		name = lv_observation_events.10.a
		hidden_effect = {
			owner = {
				random_list = {
					33 = {
						# Planet Descends into Civil War 
						event_target:pre_ftl_planet = {
							set_planet_flag = lv_extraction_sexy_civil_war
						}
						country_event = {
							id = lv_observation_events.12
							# 5 ± 2.5 years
							days = 900
							random = 1800
						}
						modifier = {
							factor = 0
							event_target:pre_ftl_country = {
								has_origin = origin_mechanists
							}
						}
					}
					33 = {
						# Planet Regresses
						event_target:pre_ftl_planet = {
							set_planet_flag = lv_extraction_sexy_regression
						}
						country_event = {
							id = lv_observation_events.14
							# 5 ± 2.5 years
							days = 900
							random = 1800
						}
					}
					33 = {
						# Observation Outpost Destroyed
						event_target:pre_ftl_planet = {
							set_planet_flag = lv_extraction_sexy_continued_development
						}
						country_event = {
							id = lv_observation_events.16
							# 5 ± 2.5 years
							days = 900
							random = 1800
						}
					}
				}
			}
		}
	}
}

# Planet Descends into Civil War #
country_event = {
	id = lv_observation_events.12
	title = lv_observation_events.12.name
	desc = lv_observation_events.12.desc
	show_sound = event_ground_battle
	location = event_target:pre_ftl_planet
	
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	
	picture_event_data = {
		room = evt_lv_gang_rape_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_extraction_sexy_civil_war
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_extraction_sexy_civil_war
		}
		event_target:pre_ftl_country = {
			random_situation = {
				limit = {
					is_situation_type = pre_ftl_tech_progress_situation
				}
				remove_situation_flag = has_ongoing_observation_event_chain
			}
		}
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
	}

	option = {
		name = lv_observation_events.12.a
		event_target:pre_ftl_country = {
			shift_ethic = "ethic_fanatic_spiritualist"
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				random_list = {
					33 = {
						# Planet Depopulated
						planet_event = {
							id = observation.1401
							days = 360
							random = 360
						}
						modifier = {
							factor = 0.5
							owner = {
								is_militarist = no
							}
						}
					}
					33 = {
						# Planet Uninhabitable
						planet_event = {
							id = observation.1403
							days = 360
							random = 360
						}
						modifier = {
							factor = 0.5
							owner = {
								is_militarist = no
							}
						}
					}
					33 = {
						# Pre-FTLs regress to Stone Age
						planet_event = {
							id = observation.1405
							days = 360
							random = 360
						}
					}
				}
			}
		}
	}
}

# Planet Regresses #
country_event = {
	id = lv_observation_events.14
	title = lv_observation_events.14.name
	desc = lv_observation_events.14.desc
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	
	picture_event_data = {
		room = evt_lv_consensual_sex_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_extraction_sexy_regression
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_extraction_sexy_regression
		}
		event_target:pre_ftl_country = {
			random_situation = {
				limit = {
					is_situation_type = pre_ftl_tech_progress_situation
				}
				remove_situation_flag = has_ongoing_observation_event_chain
			}
			random_list = {
				50 = {
					set_pre_ftl_age_effect = { PRE_FTL_AGE = steam_age }
					set_timed_country_flag = {
						flag = new_steam_age
						days = 360
					}
				}
				50 = {
					set_pre_ftl_age_effect = { PRE_FTL_AGE = renaissance_age }
					set_timed_country_flag = {
						flag = new_renaissance_age
						days = 360
					}
				}
			}
		}
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
	}
	
	option = {
		name = lv_observation_events.14.a
		custom_tooltip = regress_to_age_tt
	}
	
	after = {
		hidden_effect = {
			event_target:pre_ftl_country = {
				remove_country_flag = new_steam_age
				remove_country_flag = new_renaissance_age
			}
		}
	}
}

# Observation Outpost Destroyed (Scientist Extracted)  #
country_event = {
	id = lv_observation_events.16
	title = lv_observation_events.16.name
	desc = lv_observation_events.16.desc
	picture = GFX_evt_exploding_ship
	show_sound = event_ship_explosion
	location = event_target:pre_ftl_planet
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_extraction_sexy_continued_development
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_extraction_sexy_continued_development
		}
		event_target:pre_ftl_country = {
			set_pre_ftl_age_effect = { PRE_FTL_AGE = early_space_age }
			set_country_flag = lv_sexy_extraction_teched_up
			set_timed_country_flag = {
				flag = new_early_space_age
				days = 360
			}
		}
	}
	
	option = {
		name = lv_observation_events.16.a
		custom_tooltip = advance_to_age_tt
		hidden_effect = {
			remove_country_flag = lv_missing_sexy_scientist_chain
			set_country_flag = lv_extracted_sexy_holy_savior@event_target:pre_ftl_country
			country_event = {
				id = lv_observation_events.18
				days = 20
				random = 10
			}
		}
	}
	after = {
		event_target:pre_ftl_planet.observation_outpost = {
			dismantle = yes
		}
	}
}

# Aliens demand Holy Saviour #
country_event = {
	id = lv_observation_events.18
	title = TRANSMISSION
	desc = lv_observation_events.18.desc
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = event_target:pre_ftl_country
		planet_background = event_target:pre_ftl_planet
		graphical_culture = event_target:pre_ftl_planet
		room = event_target:pre_ftl_country
		city_level = event_target:pre_ftl_planet
	}
	
	is_triggered_only = yes
	
	trigger = {
		has_country_flag = lv_extracted_sexy_holy_savior@event_target:pre_ftl_country
		event_target:pre_ftl_country = {
			has_country_flag = lv_sexy_extraction_teched_up
		}
	}

	immediate = {
		remove_country_flag = extracted_holy_savior@event_target:pre_ftl_country
		event_target:pre_ftl_country = {
			remove_country_flag = lv_sexy_extraction_teched_up
		}
	}

	option = {
		name = lv_observation_events.18.a
		response_text = lv_observation_events.18.a.response
		is_dialog_only = yes
	}
	option = {
		name = lv_observation_events.18.b
		response_text = lv_observation_events.18.b.response
	}
	option = {
		name = lv_observation_events.18.c
		response_text = lv_observation_events.18.c.response
		hidden_effect = {
			country_event = { id = lv_observation_events.19 days = 20 random = 10 }
		}
	}
}

# Holy Saviour Returned #
country_event = {
	id = lv_observation_events.19
	title = TRANSMISSION
	desc = lv_observation_events.19.desc
	
	diplomatic = yes
	
	picture_event_data = {
		portrait = root
		planet_background = event_target:pre_ftl_planet
		graphical_culture = event_target:pre_ftl_planet
		room = event_target:pre_ftl_country
		city_level = event_target:pre_ftl_planet
	}

	is_triggered_only = yes
	
	option = {
		name = lv_observation_events.19.a
	}
	
	after = {
		hidden_effect = {
			event_target:pre_ftl_country = {
				set_country_flag = ignore_space_age_requirement
				country_event = { id = preftl.1099 }
			}
		}
	}
}

# Observation Outpost Destroyed (Scientist Not Extracted) #
country_event = {
	id = lv_observation_events.20
	title = lv_observation_events.16.name
	desc = lv_observation_events.20.desc
	picture = GFX_evt_exploding_ship
	show_sound = event_ship_explosion
	location = event_target:pre_ftl_planet
	
	is_triggered_only = yes
	
	option = {
		name = "DISCONCERTING"
		event_target:pre_ftl_planet.observation_outpost = {
			dismantle = yes
		}
	}

	after = {
		event_target:pre_ftl_planet = {
			owner = {
				set_country_flag = ignore_space_age_requirement
				country_event = { id = preftl.1099 }
			}
		}
	}
}

# Rogue Scientists Captured by Natives #
country_event = {
	id = lv_observation_events.22
	title = lv_observation_events.22.name
	desc = lv_observation_events.22.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_scientist_captured_primitives_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_missing_sexy_scientists_planet
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_captured_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_missing_sexy_scientists_planet
		}
	}
	
	option = {
		name = lv_observation_events.22.a
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_captured
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.24
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	
	after = {
		custom_tooltip = cannot_reveal_tt
		custom_tooltip = cannot_dismantle_outpost_tt
	}
}

# Sexy Scientists Sold #
country_event = {
	id = lv_observation_events.24
	title = lv_observation_events.24.name
	desc = lv_observation_events.24.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_slave_line_1_room
	}
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_scientists_captured
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_captured_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_scientists_captured
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = lv_observation_events.24.a
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_sold
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.26
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Scientist Mounts #
country_event = {
	id = lv_observation_events.26
	title = lv_observation_events.26.name
	desc = lv_observation_events.26.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_mounts_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_scientists_sold
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_captured_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_scientists_sold
		}
	}
	
	option = {
		name = lv_observation_events.26.a
		trigger = {
			owner = { is_xenophobe = no }
		}
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_mounts
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.28
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	
	option = {
		name = lv_observation_events.26.b
		trigger = {
			owner = { is_xenophobe = yes }
		}
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		add_resource = { influence = -50 }
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_mounts
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.28
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	
	option = {
		name = lv_observation_events.26.c
		trigger = {
			owner = {
				OR = {
					is_xenophile = yes
					is_materialist = yes
				}
			}
		}
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_mounts
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.28
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Domestic Scientist Slaves #
country_event = {
	id = lv_observation_events.28
	title = lv_observation_events.28.name
	desc = lv_observation_events.28.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_domestic_slave_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_scientists_mounts
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_captured_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_scientists_mounts
		}
	}
	
	option = {
		name = lv_observation_events.28.a
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_domestic
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.30
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	
	option = {
		name = lv_observation_events.28.b
		trigger = {
			owner = { is_xenophile = yes }
		}
		tooltip = {
			add_awareness = 30
		}
		observation_breach_effect = {
			RESOLUTION = resolution_pre_ftl_stances_non_interference
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_scientists_domestic
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.30
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Breeding the Scientists #
country_event = {
	id = lv_observation_events.30
	title = lv_observation_events.30.name
	desc = lv_observation_events.30.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_pre_ftl_civilization
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_breeding_scientists_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_scientists_domestic
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_captured_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_scientists_domestic
		}
		event_target:observation_post_owner = {
			owner_main_species = {
				save_event_target_as = lv_empirespecies
			}
		}
	}
	
	option = { # Support Operation
		name = lv_observation_events.30.a
		from = {
			enable_special_project = {
				name = "LV_EXTRACT_ENSLAVED_SCIENTISTS"
				location = event_target:pre_ftl_planet
				owner = root
			}
		}
	}
	
	option = { # Support Operation
		name = lv_observation_events.30.b
		trigger = {
			owner = { is_militarist = yes }
		}
		from = {
			enable_special_project = {
				name = "LV_EXTRACT_ENSLAVED_SCIENTISTS"
				location = event_target:pre_ftl_planet
				owner = root
			}
		}
	}
	
	option = { # Deny Operation
		name = lv_observation_events.30.c
		hidden_effect = {
			event_target:pre_ftl_planet = {
				observation_outpost_owner = {
					country_event = { id = lv_observation_events.32 days = 30 }
				}
			}
		}
	}
	
	after = {
		tooltip = {
			add_awareness = 100
		}
	}
}

# Successful Extraction #
ship_event = {
	id = lv_observation_events.31
	title = lv_observation_events.31.name
	desc = lv_observation_events.31.desc
	picture = GFX_evt_burning_settlement
	show_sound = event_ground_battle
	location = event_target:pre_ftl_planet
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_country = {
			random_situation = {
				limit = {
					is_situation_type = pre_ftl_tech_progress_situation
				}
				remove_situation_flag = has_ongoing_observation_event_chain
			}
		}
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
	}

	option = {
		name = lv_observation_events.31.a
		owner = { 
			add_monthly_resource_mult = {
				resource = unity
				value = @tier2unityreward
				min = @tier2unitymin
				max = @tier2unitymax
			}
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_scientists_extracted
			}
		}
	}
}

# Scientists Not Extracted #
country_event = {
	id = lv_observation_events.32
	title = lv_observation_events.32.name
	desc = lv_observation_events.32.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_ground_battle
	location = event_target:pre_ftl_planet
	
	picture_event_data = {
		room = evt_lv_extraction_failed_1_room
	}
	
	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_missing_sexy_scientist_chain
			}
		}
	}

	immediate = {
		event_target:pre_ftl_country = {
			random_situation = {
				limit = {
					is_situation_type = pre_ftl_tech_progress_situation
				}
				remove_situation_flag = has_ongoing_observation_event_chain
			}
		}
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
	}

	immediate = {
		event_target:pre_ftl_planet = {
			create_pop = {
				species = event_target:lv_empirespecies.species
			}
		}
	}
	
	option = {
		name = lv_observation_events.32.a
	}
}

##############
# Aggressive #
##############

### Close Encounters of the Probing Kind (HIDDEN) 
situation_event = {
	id = lv_observation_events.201
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			NOT = {
				has_country_flag = lv_observation_sexy_probing_fired
			}

			is_regular_pre_ftl = yes
			is_pre_industrial = yes

			capital_scope = {
				has_observation_outpost = yes
				observation_outpost = { has_mission = specimen_collection }
				observation_outpost_owner = {
					is_ai = no
					is_gestalt = no
					NOT = { has_country_flag = lv_sexy_probing_chain }
					NOT = {
						has_relation_flag = {
							who = event_root.owner
							flag = lv_probe_droids
						}
					}
				}
			}
		}
	}
	
	immediate = {
		owner = {
			set_country_flag = lv_observation_sexy_probing_fired
			save_event_target_as = pre_ftl_country
			
			capital_scope = {
				save_event_target_as = pre_ftl_planet
				set_planet_flag = lv_sexy_probing_planet
				observation_outpost_owner = {
					country_event = { id = lv_observation_events.202 }
					set_relation_flag = {
						who = event_target:pre_ftl_country
						flag = lv_probe_droids
					}
					set_country_flag = lv_sexy_probing_chain
				}
			}
		}
		set_situation_flag = has_ongoing_observation_event_chain
		# Setting this flag for the duration of the entire event chain
		# to prevent other observation events from interfering.
	}
}

# Close Encounters of the Probing Kind #
country_event = {
	id = lv_observation_events.202
	title = lv_observation_events.202.name
	desc = lv_observation_events.202.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_probing_droids_1_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_probing_planet
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_probing_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_probing_planet
		}
	}
	
	option = {
		name = lv_observation_events.202.a
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_encounters
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.204
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Breeding Experiments #
country_event = {
	id = lv_observation_events.204
	title = lv_observation_events.204.name
	desc = lv_observation_events.204.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_breeding_experiments_1_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_probing_encounters
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_probing_chain
				NOT = {
					has_relation_flag = {
						who = root.owner
						flag = lv_breeding_experiments
					}
				}
				has_relation_flag = {
					who = root.owner
					flag = lv_probe_droids
				}
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_probing_encounters
			observation_outpost_owner = {
				set_relation_flag = {
					who = event_target:pre_ftl_country
					flag = lv_breeding_experiments
				}
			}
		}
	}
	
	option = {
		name = lv_observation_events.204.a
		trigger = {
			is_xenophobe = no
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_breeding_experiments
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.206
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	option = {
		name = lv_observation_events.204.b
		trigger = {
			is_xenophobe = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_breeding_experiments
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.206
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	option = {
		name = lv_observation_events.204.c
		trigger = {
			is_materialist = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_breeding_experiments
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.206
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Probing Continued #
country_event = {
	id = lv_observation_events.206
	title = lv_observation_events.206.name
	desc = lv_observation_events.206.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_probing_continued_1_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_probing_encounters
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_probing_chain
				NOR = {
					has_relation_flag = {
						who = root.owner
						flag = lv_breeding_experiments_continued
					}
					has_relation_flag = {
						who = root.owner
						flag = lv_probing_continued
					}
				}
				has_relation_flag = {
					who = root.owner
					flag = lv_breeding_experiments
				}
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_breeding_experiments
			observation_outpost_owner = {
				set_relation_flag = {
					who = event_target:pre_ftl_country
					flag = lv_probing_continued
				}
			}
		}
	}
	
	option = {
		name = lv_observation_events.206.a
		trigger = {
			is_xenophobe = no
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_continued
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.208
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	option = {
		name = lv_observation_events.206.b
		trigger = {
			is_xenophobe = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_continued
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.208
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	option = {
		name = lv_observation_events.206.c
		trigger = {
			is_materialist = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_continued
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.208
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Masochistic Tendencies #
country_event = {
	id = lv_observation_events.208
	title = lv_observation_events.208.name
	desc = lv_observation_events.208.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_masochistic_tendencies_1_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_probing_continued
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_probing_chain
				NOT = {
					has_relation_flag = {
						who = root.owner
						flag = lv_masochistic_tendencies
					}
				}
				has_relation_flag = {
					who = root.owner
					flag = lv_probing_continued
				}
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_probing_continued
			owner = {
				random_list = {
					75 = { 
						shift_ethic = "ethic_xenophile"
						event_target:pre_ftl_planet = {
							every_owned_pop = { pop_change_ethic = "ethic_xenophile" }
							every_owned_pop = {
								limit = {
									is_robot_pop = no
									is_sapient = yes
								}
								if = {
									limit = {
										NOT = { has_trait = trait_lv_submissive }
									}
									modify_species = {
										species = this
										add_trait = trait_lv_submissive
									}
								}
								if = {
									limit = {
										NOT = { has_trait = trait_lv_masochistic }
									}
									modify_species = {
										species = this
										add_trait = trait_lv_masochistic
									}
								}
							}
						}
					}
					25 = {
						shift_ethic = "ethic_fanatic_xenophile"
						FROM = {
							every_owned_pop = { pop_change_ethic = "ethic_xenophile" }
							every_owned_pop = {
								limit = {
									is_robot_pop = no
									is_sapient = yes
								}
								if = {
									limit = {
										NOT = { has_trait = trait_lv_submissive }
									}
									modify_species = {
										species = this
										add_trait = trait_lv_submissive
									}
								}
								if = {
									limit = {
										NOT = { has_trait = trait_lv_masochistic }
									}
									modify_species = {
										species = this
										add_trait = trait_lv_masochistic
									}
								}
							}
						}
					}
				}
			}
			observation_outpost_owner = {
				set_relation_flag = {
					who = event_target:pre_ftl_country
					flag = lv_masochistic_tendencies
				}
			}
		}
	}
	
	option = {
		name = lv_observation_events.208.a
		custom_tooltip = lv_observation_events.208.a.tooltip
		tooltip = {
			add_awareness = 30
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_masochistic_tendencies
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.209
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Breeding Experiment Continued #
country_event = {
	id = lv_observation_events.209
	title = lv_observation_events.209.name
	desc = lv_observation_events.209.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_breeding_experiments_2_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_masochistic_tendencies
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_probing_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_masochistic_tendencies
		}
	}
	
	option = {
		name = lv_observation_events.209.a
		trigger = {
			is_xenophobe = no
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_ending
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.211
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	option = {
		name = lv_observation_events.209.b
		trigger = {
			is_xenophobe = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_ending
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.211
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
	option = {
		name = lv_observation_events.209.c
		trigger = {
			is_materialist = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		hidden_effect = {
			event_target:pre_ftl_planet = {
				set_planet_flag = lv_sexy_probing_ending
				observation_outpost_owner = {
					country_event = {
						id = lv_observation_events.211
						# 5 ± 2.5 years
						days = 900
						random = 1800
					}
				}
			}
		}
	}
}

# Breeding Experiment End #
country_event = {
	id = lv_observation_events.211
	title = lv_observation_events.211.name
	desc = lv_observation_events.211.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_breeding_experiments_end_1_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_probing_ending
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_probing_chain
			}
		}
	}
	
	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_probing_ending
		}
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
	}
	
	option = {
		name = lv_observation_events.211.a
		trigger = {
			is_xenophobe = no
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
	}
	option = {
		name = lv_observation_events.211.b
		trigger = {
			is_xenophobe = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier1researchreward
			min = @tier1researchmin
			max = @tier1researchmax
		}
	}
	option = {
		name = lv_observation_events.211.c
		trigger = {
			is_materialist = yes
		}
		tooltip = {
			add_awareness = 30
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

### Sexy Modification (HIDDEN) #
situation_event = {
	id = lv_observation_events.212
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		owner = {
			NOT = {
				has_country_flag = lv_observation_sexy_modification_fired
			}

			is_regular_pre_ftl = yes
			is_pre_industrial = yes

			capital_scope = {
				has_observation_outpost = yes
				observation_outpost = { has_mission = specimen_collection }
				observation_outpost_owner = {
					is_ai = no
					is_gestalt = no
					NOT = { has_country_flag = lv_sexy_modification_chain }
					NOT = {
						has_relation_flag = {
							who = root.owner
							flag = lv_sexy_modification
						}
					}
				}
			}
		}
	}
	
	immediate = {
		owner = {
			set_country_flag = lv_observation_sexy_modification_fired
			save_event_target_as = pre_ftl_country
			
			capital_scope = {
				save_event_target_as = pre_ftl_planet
				set_planet_flag = lv_sexy_modification_planet
				observation_outpost_owner = {
					country_event = { id = lv_observation_events.213 }
					set_relation_flag = {
						who = event_target:pre_ftl_country
						flag = lv_sexy_modification
					}
					set_country_flag = lv_sexy_modification_chain
				}
			}
		}
		set_situation_flag = has_ongoing_observation_event_chain
		# Setting this flag for the duration of the entire event chain
		# to prevent other observation events from interfering.
	}
}

# Sexy Modification
country_event = {
	id = lv_observation_events.213
	title = lv_observation_events.213.name
	desc = lv_observation_events.213.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_sexy_modification_1_room
	}

	is_triggered_only = yes
	
	trigger = {
		event_target:pre_ftl_planet = {
			has_planet_flag = lv_sexy_modification_planet
			owner = {
				is_regular_pre_ftl = yes
			}
			has_observation_outpost = yes
			observation_outpost_owner = {
				has_country_flag = lv_sexy_modification_chain
			}
		}
	}

	immediate = {
		save_event_target_as = observation_post_owner
		event_target:pre_ftl_planet = {
			remove_planet_flag = lv_sexy_modification_planet
		}
	}
	
	option = {
		name = lv_observation_events.213.a
		from = {
			enable_special_project = {
				name = "LV_SEXY_MODIFICATION_PROJECT"
				location = event_target:pre_ftl_planet
				owner = root
			}
		}
	}
	
	option = {
		name = lv_observation_events.213.b
	}
}

# Sexy Modification Completed #

ship_event = {
	id = lv_observation_events.1213
	title = lv_observation_events.1213.name
	desc = lv_observation_events.1213.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_laboratory_sound
	location = event_target:pre_ftl_planet
	trackable = yes
	
	picture_event_data = {
		room = evt_lv_sexy_modification_1_room
	}

	is_triggered_only = yes
	
	immediate = {
		event_target:pre_ftl_planet.observation_outpost = {
			set_event_locked = no
		}
	}

	option = {
		name = lv_observation_events.1213.a
		owner = {
			add_monthly_resource_mult = {
				resource = society_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
		event_target:pre_ftl_planet = {
			hidden_effect = {
				every_owned_pop = {
					limit = {
						is_robot_pop = no
						is_sapient = yes
					}
					if = {
						limit = { has_trait = trait_repugnant }
						modify_species = {
							species = this
							remove_trait = trait_repugnant
						}
					}
					if = {
						limit = { has_trait = trait_lv_large_breasts }
						modify_species = {
							species = this
							remove_trait = trait_lv_large_breasts
						}
					}
					if = {
						limit = { has_trait = trait_lv_excess_testosterone }
						modify_species = {
							species = this
							remove_trait = trait_lv_excess_testosterone
						}
					}
					if = {
						limit = { has_trait = trait_lv_small_breasts }
						modify_species = {
							species = this
							remove_trait = trait_lv_small_breasts
						}
					}
					if = {
						limit = { has_trait = trait_lv_sexually_inept }
						modify_species = {
							species = this
							remove_trait = trait_lv_sexually_inept
						}
					}
					if = {
						limit = { has_trait = trait_lv_sexually_repressed }
						modify_species = {
							species = this
							remove_trait = trait_lv_sexually_repressed
						}
					}
					if = {
						limit = { has_trait = trait_lv_shapely_ass }
						modify_species = {
							species = this
							remove_trait = trait_lv_shapely_ass
						}
					}
					if = {
						limit = { has_trait = trait_lv_all_male }
						modify_species = {
							species = this
							remove_trait = trait_lv_all_male
						}
					}
					if = {
						limit = { has_trait = trait_lv_targeted_pheromones }
						modify_species = {
							species = this
							remove_trait = trait_lv_targeted_pheromones
						}
					}
					if = {
						limit = { has_trait = trait_lv_elastic_orifices }
						modify_species = {
							species = this
							remove_trait = trait_lv_elastic_orifices
						}
					}
					if = {
						limit = { has_trait = trait_lv_exhibitionist }
						modify_species = {
							species = this
							remove_trait = trait_lv_exhibitionist
						}
					}
					if = {
						limit = { has_trait = trait_lv_sexually_gifted }
						modify_species = {
							species = this
							remove_trait = trait_lv_sexually_gifted
						}
					}
					if = {
						limit = { has_trait = trait_lv_natural_anal_lube }
						modify_species = {
							species = this
							remove_trait = trait_lv_natural_anal_lube
						}
					}
					if = {
						limit = { has_trait = trait_lv_neuron_saliva }
						modify_species = {
							species = this
							remove_trait = trait_lv_neuron_saliva
						}
					}
					if = {
						limit = { has_trait = trait_lv_sexual_pheromones }
						modify_species = {
							species = this
							remove_trait = trait_lv_sexual_pheromones
						}
					}
					if = {
						limit = { has_trait = trait_nonadaptive }
						modify_species = {
							species = this
							remove_trait = trait_nonadaptive
						}
					}
					if = {
						limit = { has_trait = trait_lv_nudist }
						modify_species = {
							species = this
							remove_trait = trait_lv_nudist
						}
					}
					if = {
						limit = { NOT = { has_trait = trait_lv_cute } }
						modify_species = {
							species = this
							add_trait = trait_lv_cute
						}
					}
					if = {
						limit = { NOT = { has_trait = trait_lv_huge_breasts } }
						modify_species = {
							species = this
							add_trait = trait_lv_huge_breasts
						}
					}
					if = {
						limit = { NOT = { has_trait = trait_lv_breeder_hips } }
						modify_species = {
							species = this
							add_trait = trait_lv_breeder_hips
						}
					}
					if = {
						limit = { NOT = { has_trait = trait_lv_perfect_hybrid } }
						modify_species = {
							species = this
							add_trait = trait_lv_perfect_hybrid
						}
					}
				}
			}			
		}
	}
}

### COVERT INFILTRATION (disabled as of 3.7 - to be reworked!) ###

# Lustful Machinations (HIDDEN) #

#planet_event = {
#	id = lv_observation_events.301
#	hide_window = yes
#	
#	trigger = {
#		has_observation_outpost = yes
#		observation_outpost = { 
#			has_mission = covert_infiltration
#			mission_progress > 0.1
#		}
#		observation_outpost_owner = {
#			NOR = {
#				has_ethic = ethic_gestalt_consciousness
#				has_country_flag = lv_observation_lustful_machinations
#			}
#			has_technology = tech_lv_cyber_sextoys
#		}
#	}
#	
#	mean_time_to_happen = {
#		months = 60
#	}
#	
#	immediate = {
#		observation_outpost_owner = {
#			set_country_flag = lv_observation_lustful_machinations
#			country_event = { id = lv_observation_events.302 }
#		}
#	}
#}

# Lustful Machinations #

#country_event = {
#	id = lv_observation_events.302
#	title = lv_observation_events.302.name
#	desc = lv_observation_events.302.desc
#	diplomatic = yes
#	custom_gui = "lv_h_window"
#	custom_gui_option = "lv_h_option"
#	show_sound = event_conversation
#	location = FROM
#	trackable = yes
#	
#	picture_event_data = {
#		room = evt_lv_robot_spider_sex_1_room
#	}
#	
#	is_triggered_only = yes
#	
#	immediate = {
#		FROM = {
#			observation_outpost = { add_mission_progress = 0.2 }
#		}
#	}
#	
#	option = {
#		name = lv_observation_events.302.a
#		tooltip = {
#			FROM = {
#				observation_outpost = { add_mission_progress = 0.2 }
#			}
#		}
#	}
#}

###