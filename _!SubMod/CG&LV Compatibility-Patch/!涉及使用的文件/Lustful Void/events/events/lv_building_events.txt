namespace = lv_building_events

###############################
###     Building Events     ###
###############################

# Pop Stealing (megacorp)
planet_event = {
	id = lv_building_events.1
	hide_window = yes
	
	pre_triggers = {
		has_owner = yes
		has_ground_combat = no
	}
	
	trigger = {
		NOR = {
			has_global_flag = lv_all_disabled
			has_global_flag = lv_pop_stealing_mc_disabled
		}
		NOT = { has_planet_flag = lv_pop_kidnapped_recent }
		has_branch_office = yes
		OR = {
			has_planet_flag = lv_has_recruitment_center
			has_planet_flag = lv_has_recruitment_center_elite
			has_planet_flag = lv_has_sentient_acquisitions
			has_planet_flag = lv_has_sentient_acquisitions_elite
		}
		num_pops > 12
	}
	
	mean_time_to_happen = {
		months = 18
	}
	
	immediate = {
		save_event_target_as = lv_abduction_planet
		random_owned_pop = {
			save_event_target_as = lv_kidnapped_pop
		}
		branch_office_owner = {
			random_owned_planet = {
				save_event_target_as = lv_relocated_planet
				create_pop = {
					species = event_target:lv_kidnapped_pop.species
				}
				if = {
					limit = {
						NOR = {
							has_global_flag = lv_events_hidden
							has_global_flag = lv_rape_disabled
						}
					}
					planet_event = { id = lv_event_popups.1500 }
				}
			}
		}
		event_target:lv_kidnapped_pop = {
			kill_pop = yes
		}
		set_timed_planet_flag = {
			flag = lv_pop_kidnapped_recent
			days = 740
		}
		planet_event = { id = lv_event_popups.1501 }
	}
}

# Cow transformation
event = {
	id = lv_building_events.2
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		every_playable_country = {
			every_owned_planet = {
				if ={ 
					limit = { has_modifier = lv_milking_world }
					lv_milk_cow_transform_effect = yes
				}
			}
		}
	}
}

###