###############################
###     Ascension Perks     ###
###############################

##########
# Normal #
##########

# Breeding Superiority
ap_lv_breeding = {
	potential = {
		NOT = { has_ascension_perk = ap_lv_breeding }
	}

	possible = {
		exists = owner
		owner = { has_tradition = tr_lv_breeding_finish }
		custom_tooltip = {
			fail_text = "requires_tr_lv_breeding_finish"
			has_tradition = tr_lv_breeding_finish
		}
		custom_tooltip = {
			fail_text = "requires_lv_bio_species"
			any_owned_pop = {
				OR = {
					NOR = {
						is_same_species = root.owner
						has_trait = trait_mechanical
						has_trait = trait_machine_unit
					}
					AND = {
						is_same_species = root.owner
						NOR = {
							has_trait = trait_mechanical
							has_trait = trait_machine_unit
						}
					}
				}
			}	
		}
	}
	
	on_enabled = {
		custom_tooltip = "ap_lv_breeding_effect"
	}

	modifier = {
		pop_growth_speed = 0.5
		empire_size_pops_mult = -0.25
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_xenophile
		}
	}
}

# Tentacle Breeding Pit Integration
ap_lv_tentacle_breeding_pit_integration = {
	potential = {
		NOT = { has_ascension_perk = ap_lv_tentacle_breeding_pit_integration }
	}

	possible = {
		exists = owner
		owner = { has_ascension_perk = ap_mastery_of_nature }
		custom_tooltip = {
			fail_text = "requires_ap_mastery_of_nature"
			has_ascension_perk = ap_mastery_of_nature
		}
		custom_tooltip = {
			fail_text = "requires_tech_lv_tentacular_awakening"
			has_technology = tech_lv_tentacular_awakening
		}
	}
	
	on_enabled = {
		custom_tooltip = "ap_lv_tentacle_breeding_pit_integration_effect"
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_xenophile
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_xenophile
		}
		modifier = {
			factor = 2
			years_passed > 40
			num_owned_planets < 5
		}
		modifier = {
			factor = 2
			years_passed > 80
			num_owned_planets < 10
		}
	}
}

#############
# Sexopolis #
#############

# Sexual Mega-projects
ap_lv_sworld_project = {
	potential = {
		OR = {
			NOT = { has_authority = auth_machine_intelligence }
			has_valid_civic = civic_machine_assimilator
			has_valid_civic = civic_machine_servitor	
		}
		NOT = { has_valid_civic = civic_agrarian_idyll }
		NOT = {
			has_ascension_perk = ap_lv_sworld_project
		}
	}
	
	possible = {
		custom_tooltip = {
			fail_text = "requires_technology_housing_2"
			has_technology = tech_housing_2
		}
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
	}

	on_enabled = {
		custom_tooltip = "lv_allow_sexual_engineering"
		give_technology = { tech = tech_lv_lactation_drugs }
		give_technology = { tech = tech_lv_generalized_sexology_studies }
		give_technology = { tech = tech_lv_gem_incubation_insight }
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pacifist
		}
		modifier = {
			factor = 2
			has_ethic = ethic_materialist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_materialist
		}
	}
}

###