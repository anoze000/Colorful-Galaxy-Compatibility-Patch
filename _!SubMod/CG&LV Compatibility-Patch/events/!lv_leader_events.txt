namespace = lv_leader_events

#############################
###     Leader Events     ###
#############################

#################
# Leader Gender #
#################

# Ensure that all generated leaders are female #

country_event = {
	id = lv_leader_events.1
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		from = {
			species = {
				OR = {
					OR = {
						has_trait = trait_lv_all_female
						has_trait = trait_suc_parthenogenesis
					}
					has_trait = trait_lv_futanari
					species_gender = female
				}
			}
			OR = {
				gender = male
				gender = indeterminable
			}
		}
	}

	immediate = {
		from = {
			set_gender = female
			set_name = random
		}
	}
}

# Ensure that all generated leaders are male #

country_event = {
	id = lv_leader_events.2
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		from = {
			species = {
				OR = {
					has_trait = trait_lv_all_male
					species_gender = male
				}
			}
			OR = {
				gender = female
				gender = indeterminable
			}
		}
	}

	immediate = {
		from = {
			set_gender = male
			set_name = random
		}
	}
}

# Female Leadership Only #

country_event = {
	id = lv_leader_events.3
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_policy_flag = lv_gender_leadership_female
		from = {
			OR = {
				gender = male
				gender = indeterminable
			}
		}
	}

	immediate = {
		from = {
			set_gender = female
			set_name = random
		}
	}
}

# Male Leadership Only #

country_event = {
	id = lv_leader_events.4
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		has_policy_flag = lv_gender_leadership_male
		from = {
			OR = {
				gender = female
				gender = indeterminable
			}
		}
	}

	immediate = {
		from = {
			set_gender = male
			set_name = random
		}
	}
}

########################
# Pleasure Suit Events #
########################

# Chance for leaders to gain pleasure suit addiction #

country_event = {
	id = lv_leader_events.100
	hide_window = yes
#	is_triggered_only = yes

	trigger = {
		owner = { has_technology = tech_lv_mechanized_pleasure_suits }
	}
	
	mean_time_to_happen = {
		months  = 30
		modifier = {
			factor = 4
			has_policy_flag = lv_pleasure_suits_banned
		}
		modifier = {
			factor = 0.5
			has_policy_flag = lv_pleasure_suits_slavery
		}
		modifier = {
			factor = 1.3
			has_valid_civic = civic_lv_pleasure_suits
		}
	}

	immediate = {
		random_owned_leader = {
			if = {
				limit = {
					NOR = {
						has_trait = leader_trait_lv_pleasure_suit_addict
						has_trait = leader_trait_lv_pleasure_suit_addict_2
						has_trait = leader_trait_lv_pleasure_suit_addict_3
					}
				}
				random_list = {
					45 = { }
					25 = { 
						modifier = {
							factor = 0
							NOR = { 
								has_trait = leader_trait_lv_highly_submissive
								has_trait = leader_trait_lv_highly_submissive_2
								has_trait = leader_trait_lv_highly_submissive_3
								has_trait = leader_trait_scientist_lv_sexologist
								has_trait = leader_trait_scientist_lv_sexologist_2
								has_trait = leader_trait_scientist_lv_sexologist_3
							}
						}
						save_event_target_as = lv_suit_slut
						root = {
							country_event = { id = lv_leader_events.101 }
						}
					}
					25 = { 
						modifier = {
							factor = 0
							species = {
								NOR = { 
									has_trait = trait_lv_submissive
									has_trait = trait_lv_lewd_mind
									has_trait = trait_lv_sex_crazed
								}
							}
						}
						save_event_target_as = lv_suit_slut
						root = {
							country_event = { id = lv_leader_events.101 }
						}
					}
					5 = { 
						save_event_target_as = lv_suit_slut
						root = {
							country_event = { id = lv_leader_events.101 }
						}
					}
				}
			}
		}
	}
}

# Pleasure Suit Addiction #

country_event = {
	id = lv_leader_events.101
	title = lv_leader_events.101.name
	desc = lv_leader_events.101.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_pleasure_suit_1_room
	}
	
	is_triggered_only = yes
	
	immediate = {
		event_target:lv_suit_slut = {
			lv_add_suit = yes
			add_skill = -1
		}
	}
	
	option = {
		name = lv_leader_events.101.a
	}
}

# Chance for leaders to loose pleasure suit addiction #

country_event = {
	id = lv_leader_events.102
	hide_window = yes
#	is_triggered_only = yes

	trigger = {
		owner = { has_technology = tech_lv_mechanized_pleasure_suits }
	}
	
	mean_time_to_happen = {
		months  = 30
		modifier = {
			factor = 4
			has_policy_flag = lv_pleasure_suits_banned
		}
		modifier = {
			factor = 0.5
			has_policy_flag = lv_pleasure_suits_slavery
		}
		modifier = {
			factor = 1.3
			has_valid_civic = civic_lv_pleasure_suits
		}
	}
	
	immediate = {
		random_owned_leader = {
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_lv_pleasure_suit_addict
						has_trait = leader_trait_lv_pleasure_suit_addict_2
						has_trait = leader_trait_lv_pleasure_suit_addict_3
					}
				}
				random_list = {
					60 = { 
						modifier = {
							factor = 2
							species = {
								OR = { 
									has_trait = trait_lv_submissive
									has_trait = trait_lv_lewd_mind
									has_trait = trait_lv_sex_crazed
								}
							}
						}
					}
					30 = {
						modifier = {
							factor = 0
							OR = { 
								has_trait = leader_trait_lv_highly_submissive
								has_trait = leader_trait_lv_highly_submissive_2
								has_trait = leader_trait_lv_highly_submissive_3
							}
						}
						modifier = {
							factor = 1.5
							has_level = 4
						}
						modifier = {
							factor = 2
							has_level = 5
						}						
						modifier = {
							factor = 2.5
							has_level > 5
						}
						save_event_target_as = lv_suit_slut
						root = {
							country_event = { id = lv_leader_events.103 }
						}
					}
				}
			}
		}
	}
}

# Pleasure Suit Addiction Recovery #

country_event = {
	id = lv_leader_events.103
	title = lv_leader_events.103.name
	desc = lv_leader_events.103.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_pleasure_suit_removal_1_room
	}
	
	is_triggered_only = yes
	
	immediate = {
		event_target:lv_suit_slut = {
			lv_remove_suit = yes
			add_skill = 1
		}
	}
	
	option = {
		name = lv_event_popups.0
	}
}

# New Leaders Get Suit Traits #

country_event = {
	id = lv_leader_events.104
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = { has_technology = tech_lv_mechanized_pleasure_suits }
	}

	immediate = {
		from = {
			random_list = {
				85 = { }
				10 = {
					modifier = {
						factor = 2
						species = {
							OR = { 
								has_trait = trait_lv_submissive
								has_trait = trait_lv_lewd_mind
								has_trait = trait_lv_sex_crazed
							}
						}
					}
					modifier = { 
						factor = 2
						owner = {
							has_policy_flag = lv_pleasure_suits_slavery
						}
					}
					modifier = { 
						factor = 0
						owner = {
							has_policy_flag = lv_pleasure_suits_banned
						}
					}
					lv_add_suit = yes
				}
				5 = {
					modifier = { 
						factor = 2
						owner = {
							has_policy_flag = lv_pleasure_suits_banned
						}
					}
					lv_remove_suit = yes
				}
			}
		}
	}
}

# Pleasure Suits Banned #

country_event = {
	id = lv_leader_events.105
	title = lv_leader_events.105.name
	desc = lv_leader_events.105.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_pleasure_suit_removal_1_room
	}
	
	is_triggered_only = yes

	immediate = {
		every_owned_leader = {
			limit = {
				OR = {
					has_trait = leader_trait_lv_pleasure_suit_addict
					has_trait = leader_trait_lv_pleasure_suit_addict_2
					has_trait = leader_trait_lv_pleasure_suit_addict_3
				}
			}
			lv_remove_suit = yes
			add_skill = 1
		}
		every_owned_planet = { 
			add_modifier = { modifier = "lv_ex_suit_planet" days = 180 }
		}
	}
	
	option = {
		name = lv_event_popups.0
		custom_tooltip = lv_leader_events.105.a.tooltip
	}
}

# Kidnap Leader #

country_event = {
	id = lv_leader_events.150
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				NOR = {
					has_global_flag = lv_events_hidden
					has_global_flag = lv_all_disabled
					has_global_flag = lv_rape_disabled
				}
			}
			random_list = {
				25 = { country_event = { id = lv_leader_events.151 } }
				25 = { country_event = { id = lv_leader_events.161 } }
				25 = { country_event = { id = lv_leader_events.171 } }
				25 = { country_event = { id = lv_leader_events.181 } }
			}
		}
	}
}

# Ruler
country_event = {
	id = lv_leader_events.151
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:KidnapTargetCountry = {
			random_owned_leader ={
				limit = { is_ruler = yes }
				species = {
					save_event_target_as = KidnapRulerTargetSpecies
				}
				save_event_target_as = KidnapRulerTarget
			}
		}

		event_target:KidnapperCountry = {
			country_event = { id = lv_leader_events.152 }
		}
	}
}

country_event = {
	id = lv_leader_events.152
	title = lv_leader_events.152.name
	desc = lv_leader_events.152.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_kidnap_leader_1_room
	}
	
	is_triggered_only = yes

	option = {
		name = lv_leader_events.152.a
		
		hidden_effect = {
			event_target:KidnapperCountry = {
				create_leader = {
					class = official
					species = event_target:KidnapRulerTargetSpecies
					name = event_target:KidnapRulerTarget
					traits = random
				}
			}
			event_target:KidnapTargetCountry = {
				event_target:KidnapRulerTarget = {
					kill_leader = { show_notification = no }
				}
			}
		}
	}
}

# Official
country_event = {
	id = lv_leader_events.161
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:KidnapTargetCountry = {
			random_owned_leader ={
				limit = { leader_class = official }
				species = {
					save_event_target_as = KidnapOfficialTargetSpecies
				}
				save_event_target_as = KidnapOfficialTarget
			}
		}

		event_target:KidnapperCountry = {
			country_event = { id = lv_leader_events.162 }
		}
	}
}

country_event = {
	id = lv_leader_events.162
	title = lv_leader_events.162.name
	desc = lv_leader_events.162.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_kidnap_leader_1_room
	}
	
	is_triggered_only = yes

	option = {
		name = lv_leader_events.162.a
		
		hidden_effect = {
			event_target:KidnapperCountry = {
				create_leader = {
					class = official
					species = event_target:KidnapOfficialTargetSpecies
					name = event_target:KidnapOfficialTarget
					traits = random
				}
			}
			event_target:KidnapTargetCountry = {
				event_target:KidnapOfficialTarget = {
					kill_leader = { show_notification = no }
				}
			}
		}
	}
}

# Commander
country_event = {
	id = lv_leader_events.171
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:KidnapTargetCountry = {
			random_owned_leader ={
				limit = { leader_class = commander }
				species = {
					save_event_target_as = KidnapCommanderTargetSpecies
				}
				save_event_target_as = KidnapCommanderTarget
			}
		}

		event_target:KidnapperCountry = {
			country_event = { id = lv_leader_events.172 }
		}
	}
}

country_event = {
	id = lv_leader_events.172
	title = lv_leader_events.172.name
	desc = lv_leader_events.172.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_kidnap_leader_1_room
	}
	
	is_triggered_only = yes

	option = {
		name = lv_leader_events.172.a
		
		hidden_effect = {
			event_target:KidnapperCountry = {
				create_leader = {
					class = commander
					species = event_target:KidnapCommanderTargetSpecies
					name = event_target:KidnapCommanderTarget
					traits = random
				}
			}
			event_target:KidnapTargetCountry = {
				event_target:KidnapCommanderTarget = {
					kill_leader = { show_notification = no }
				}
			}
		}
	}
}

# Scientist
country_event = {
	id = lv_leader_events.181
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:KidnapTargetCountry = {
			random_owned_leader ={
				limit = { leader_class = scientist }
				species = {
					save_event_target_as = KidnapScientistTargetSpecies
				}
				save_event_target_as = KidnapScientistTarget
			}
		}

		event_target:KidnapperCountry = {
			country_event = { id = lv_leader_events.182 }
		}
	}
}

country_event = {
	id = lv_leader_events.182
	title = lv_leader_events.182.name
	desc = lv_leader_events.182.desc
	diplomatic = yes
	custom_gui = "lv_h_window"
	custom_gui_option = "lv_h_option"
	show_sound = event_airlock
	
	picture_event_data = {
		room = evt_lv_kidnap_leader_1_room
	}
	
	is_triggered_only = yes

	option = {
		name = lv_leader_events.182.a
		
		hidden_effect = {
			event_target:KidnapperCountry = {
				create_leader = {
					class = scientist
					species = event_target:KidnapScientistTargetSpecies
					name = event_target:KidnapScientistTarget
					traits = random
				}
			}
			event_target:KidnapTargetCountry = {
				event_target:KidnapScientistTarget = {
					kill_leader = { show_notification = no }
				}
			}
		}
	}
}

###