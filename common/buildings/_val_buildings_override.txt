@buildings_t1 = 1
@buildings_t2 = 2
@buildings_t3 = 3
@buildings_t4 = 4

#############
# Robot buildings
#############

building_robot_assembly_plant = {
	base_buildtime = @b1_time
	base_cap_amount = 1

	category = pop_assembly

	potential = {
		exists = owner
		OR = {
			owner = { 
				is_ai = no 
			}
			NOT = { 
				exists = assembling_species 
			}
			assembling_species = { 
				is_robotic_species = yes 
			}
		}
		owner = {
			is_regular_empire = yes
			NOT = { 
				has_policy_flag = robots_outlawed 
			}
			OR = {
				is_ai = no
				NOT = { 
					has_ascension_perk = ap_engineered_evolution 
				}
				is_materialist = yes
			}
		}
		NOT = { 
			has_modifier = slave_colony 
		}
	}

	convert_to = {
		building_machine_assembly_plant
	}

	upgrades = {
		building_robot_assembly_complex
	}

	allow = {
		hidden_trigger = {
			OR = {
				owner = { 
					is_ai = no 
				}
				NAND = {
					free_district_slots = 0
					free_building_slots <= 1
					free_housing <= 0
					free_jobs <= 0
				}
			}
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					is_regular_empire = no
					has_policy_flag = robots_outlawed
				}
			}
			has_modifier = slave_colony
			AND = {
				owner = { 
					is_ai = yes 
				}
				free_district_slots = 0
				free_building_slots = 0
				free_housing <= 0
				free_jobs <= 0
			}
			owner = {
				is_ai = yes
				has_ascension_perk = ap_engineered_evolution
				is_materialist = no
			}
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner = {
				is_futa_country = no
			}
		}
		modifier = {
			job_roboticist_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner = {
				is_futa_country = yes
			}
		}
		modifier = {
			job_futa_assembly_add = 1
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	triggered_desc = {
		trigger = {
			OR = {
				NOT = {
					exists = owner
				}
				AND = {
					exists = owner
					owner = {
						is_futa_country = no
						NOT = {
							has_policy_flag = roboticist_output_build_cyborgs
						}
					}
				}
			}
		}
		text = job_roboticist_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_futa_country = no
				has_policy_flag = roboticist_output_build_cyborgs
			}
		}
		text = job_roboticist_cyborg_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_futa_country = yes
			}
		}
		text = job_futa_assembly_effect_desc
	}
	triggered_desc = {
		trigger = {
			OR = {
				has_building = building_clone_vats
				has_building = building_clone_army_clone_vat
				has_building = building_posthumous_employment_center
				AND = {
					exists = assembling_species
					assembling_species = {
						is_organic_species = yes
					}
					exists = owner
					owner = {
						NOT = {
							has_policy_flag = roboticist_output_build_cyborgs
						}
					}
				}
			}
		}
		text = tooltip_organic_and_artificial_assembly_warning
	}

	prerequisites = {
		"tech_robotic_workers"
	}
}

building_robot_assembly_complex = {
	icon = building_machine_assembly_complex
	base_buildtime = @b3_time
	can_build = no

	category = pop_assembly

	potential = {
		exists = owner
		OR = {
			owner = { 
				is_ai = no 
			}
			NOT = { 
				exists = assembling_species 
			}
			assembling_species = { 
				is_robotic_species = yes 
			}
		}
		owner = {
			is_regular_empire = yes
			NOT = { 
				has_policy_flag = robots_outlawed 
			}
			OR = {
				is_ai = no
				NOT = { 
					has_ascension_perk = ap_engineered_evolution 
				}
				is_materialist = yes
			}
		}
		NOT = { 
			has_modifier = slave_colony 
		}
	}

	convert_to = {
		building_machine_assembly_complex
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = {
				OR = {
					is_regular_empire = no
					has_policy_flag = robots_outlawed
				}
			}
			has_modifier = slave_colony
			AND = {
				owner = { 
					is_ai = yes 
				}
				free_district_slots = 0
				free_building_slots = 0
				free_housing <= 0
				free_jobs <= 0
			}
			owner = {
				is_ai = yes
				has_ascension_perk = ap_engineered_evolution
				is_materialist = no
			}
		}
	}

	# planet_modifier = {
	# 	job_roboticist_add = 2
	# }
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_futa_country = no
			}
		}
		modifier = {
			job_roboticist_add = 2
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_futa_country = yes
			}
		}
		modifier = {
			job_futa_assembly_add = 2
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			rare_crystals = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			rare_crystals = @b3_rare_upkeep
		}
	}
	prerequisites = {
		tech_robot_assembly_complex
	}
	triggered_desc = {
		trigger = {
			OR = {
				NOT = {
					exists = owner
				}
				AND = {
					exists = owner
					owner = {
						is_futa_country = no

						NOT = {
							has_policy_flag = roboticist_output_build_cyborgs
						}
					}
				}
			}
		}
		text = job_roboticist_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_futa_country = no

				has_policy_flag = roboticist_output_build_cyborgs
			}
		}
		text = job_roboticist_cyborg_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				is_futa_country = yes
			}
		}
		text = job_futa_assembly_effect_desc
	}

	triggered_desc = {
		trigger = {
			OR = {
				has_building = building_clone_vats
				has_building = building_clone_army_clone_vat
				has_building = building_posthumous_employment_center
				AND = {
					exists = assembling_species
					assembling_species = {
						is_organic_species = yes
					}
					exists = owner
					owner = {
						NOT = {
							has_policy_flag = roboticist_output_build_cyborgs
						}
					}
				}
			}
		}
		text = tooltip_organic_and_artificial_assembly_warning
	}
}


building_capital = {
	base_buildtime = @b2_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	category = government

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_fallen_empire = no
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			uses_habitat_capitals = yes
		}
	}

	convert_to = {
		building_hive_capital
		building_machine_capital
		building_resort_capital
		building_slave_capital
		building_ancient_control_center
		building_ancient_palace
	}

	allow = {
		OR = {
			PR_trgr_plnt_HC_MORE = { 
				HC = 10 
			}
			num_pops >= 10
		}
	}

	upgrades = {
		"building_major_capital"
	}

	prerequisites = {
		"tech_planetary_government"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	planet_modifier = {
		job_enforcer_add = 1
		planet_housing_add = 5
		planet_amenities_add = 5
		planet_max_buildings_add = @buildings_t2
		planet_max_branch_office_buildings_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		job_roboticist_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = {
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_authority = auth_corporate 
			}
		}
		modifier = {
			job_executive_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_exalted_priesthood 
			}
		}
		modifier = {
			job_high_priest_add = 1
			job_politician_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_aristocratic_elite 
			}
		}
		modifier = {
			job_noble_add = 1
			job_politician_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_technocracy 
			}
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_merchant_guilds 
			}
		}
		modifier = {
			job_merchant_add = 1
			job_politician_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_1 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_cybernetics_organ_harvesting 
			}
			has_current_purge = yes
			growing_species = { 
				has_trait = trait_cybernetic 
			}
		}
		pop_growth_speed = 0.10
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = @b2_upkeep
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_exalted_priesthood
			}
		}
		text = job_high_priest_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_aristocratic_elite
			}
		}
		text = job_noble_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_technocracy
			}
		}
		text = job_head_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_merchant_guilds
			}
		}
		text = job_merchant_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOT = { 
					has_authority = auth_corporate 
				}
				is_regular_empire = yes
			}
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		text = job_roboticist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_authority = auth_corporate
			}
		}
		text = job_executive_effect_desc
	}
	triggered_desc = {
		text = job_enforcer_effect_desc
	}

	triggered_desc = {
		trigger = {
			has_modifier = payback_unified_purpose
		}
		text = job_unifier_effect_desc
	}

	#莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_origin= origin_AL_Sierlint 
			}
		}
		modifier = {
			job_AL_head_majyo_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}
}

building_major_capital = {
	base_buildtime = @b3_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	category = government

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_fallen_empire = no
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	allow = {
		OR = {
			PR_trgr_plnt_HC_MORE = { 
				HC = 25 
			}
			num_pops >= 25
		}
	}

	convert_to = {
		building_hive_major_capital
		building_machine_major_capital
		building_resort_major_capital
		building_slave_major_capital
		building_ancient_control_center
		building_ancient_palace
	}

	prerequisites = {
		"tech_colonial_centralization"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	planet_modifier = {
		job_enforcer_add = 2
		planet_housing_add = 8
		planet_amenities_add = 8
		planet_max_buildings_add = @buildings_t3
		planet_max_branch_office_buildings_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		job_roboticist_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = {
			job_politician_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_authority = auth_corporate 
			}
		}
		modifier = {
			job_executive_add = 3
		}
	}


	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_exalted_priesthood 
			}
		}
		modifier = {
			job_high_priest_add = 1
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_aristocratic_elite 
			}
		}
		modifier = {
			job_noble_add = 1
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_technocracy 
			}
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_merchant_guilds 
			}
		}
		modifier = {
			job_merchant_add = 1
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_1 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_2 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner.federation
			owner.federation = { 
				has_federation_perk = culture_workers_1 
			}
		}
		job_culture_worker_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_cybernetics_organ_harvesting 
			}
			has_current_purge = yes
			growing_species = { 
				has_trait = trait_cybernetic 
			}
		}
		pop_growth_speed = 0.10
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
		}
		upkeep = {
			energy = @b3_upkeep
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_exalted_priesthood
			}
		}
		text = job_high_priest_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_aristocratic_elite
			}
		}
		text = job_noble_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_technocracy
			}
		}
		text = job_head_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_merchant_guilds
			}
		}
		text = job_merchant_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		text = job_roboticist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_authority = auth_corporate
			}
		}
		text = job_executive_effect_desc
	}

	triggered_desc = {
		text = job_enforcer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner.federation
			owner.federation = { 
				has_federation_perk = culture_workers_1 
			}
		}
		text = job_culture_worker_effect_desc
	}

	triggered_desc = {
		trigger = {
			has_modifier = payback_unified_purpose
		}
		text = job_unifier_effect_desc
	}

	upgrades = {
		"building_system_capital"
	}

	#莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_origin= origin_AL_Sierlint 
			}
		}
		modifier = {
			job_AL_head_majyo_add = 1
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}

}

building_system_capital = {
	base_buildtime = @b4_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	category = government

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_fallen_empire = no
		}
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
		}
	}

	convert_to = {
		building_hive_major_capital
		building_machine_major_capital
		building_major_capital
		building_resort_major_capital
		building_slave_major_capital
		building_ancient_control_center
		building_ancient_palace
	}

	allow = {
		OR = {
			PR_trgr_plnt_HC_MORE = { 
				HC = 50 
			}
			num_pops >= 50
		}
	}

	prerequisites = {
		"tech_galactic_administration"
	}

	show_tech_unlock_if = {
		is_regular_empire = yes
	}

	planet_modifier = {
		job_enforcer_add = 3
		planet_housing_add = 12
		planet_amenities_add = 12
		planet_max_buildings_add = @buildings_t4
		planet_max_branch_office_buildings_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_synthetics_finish }
		}
		job_roboticist_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = {
			job_politician_add = 4
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_authority = auth_corporate 
			}
		}
		modifier = {
			job_executive_add = 4
		}
	}


	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_exalted_priesthood 
			}
		}
		modifier = {
			job_high_priest_add = 2
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_aristocratic_elite 
			}
		}
		modifier = {
			job_noble_add = 2
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_technocracy 
			}
		}
		modifier = {
			job_head_researcher_add = 2
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_merchant_guilds 
			}
		}
		modifier = {
			job_merchant_add = 2
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_1 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_2 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_3 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner.federation
			owner.federation = { 
				has_federation_perk = culture_workers_1 
			}
		}
		job_culture_worker_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_cybernetics_organ_harvesting 
			}
			has_current_purge = yes
			growing_species = { 
				has_trait = trait_cybernetic 
			}
		}
		pop_growth_speed = 0.10
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
		}
		upkeep = {
			energy = @b4_upkeep
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_exalted_priesthood
			}
		}
		text = job_high_priest_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_aristocratic_elite
			}
		}
		text = job_noble_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_technocracy
			}
		}
		text = job_head_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_merchant_guilds
			}
		}
		text = job_merchant_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOT = { 
					has_authority = auth_corporate 
				}
				is_regular_empire = yes
			}
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		text = job_roboticist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_authority = auth_corporate
			}
		}
		text = job_executive_effect_desc
	}
	triggered_desc = {
		text = job_enforcer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner.federation
			owner.federation = { 
				has_federation_perk = culture_workers_1 
			}
		}
		text = job_culture_worker_effect_desc
	}

	triggered_desc = {
		trigger = {
			has_modifier = payback_unified_purpose
		}
		text = job_unifier_effect_desc
	}

	#莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_origin= origin_AL_Sierlint 
			}
		}
		modifier = {
			job_AL_head_majyo_add = 2
		}
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}

	upgrades = {
		building_imperial_capital
		building_ancient_palace
		azur_building_mind_capital
	}
}

building_hab_capital = {
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	icon = building_capital

	category = government

	potential = {
		OR = {
			FW_trgr_plnt_CLASS_habitat = yes
			uses_habitat_capitals = yes
		}
		exists = owner
		owner = { 
			is_fallen_empire = no 
		}
	}

	convert_to = {
		building_hab_fe_capital
	}

	resources = {
		category = planet_buildings_hab_capital
		upkeep = {
			energy = 3
			alloys = 5
		}
		upkeep = {
			trigger = { 
				owner = { 
					has_active_tradition = tr_domination_adopt_void 
				} 
			}
			alloys = -1
		}
	}

	planet_modifier = {
		planet_housing_add = 3
		planet_amenities_add = 3
		planet_max_buildings_add = @buildings_t1
	}

	triggered_planet_modifier = {
		modifier = { 
			planet_stability_add = 1 
		}
		mult = modifier:habitat_stability_add
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_prosperity_void_works 
			}
		}
		modifier = {
			planet_max_buildings_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		job_roboticist_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_origin = origin_void_dwellers
				}
				is_regular_empire = yes
			}
		}
		job_politician_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_authority = auth_corporate
				NOT = { 
					has_origin = origin_void_dwellers 
				}
			}
		}
		modifier = {
			job_executive_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_origin = origin_void_dwellers
				is_regular_empire = yes
			}
		}
		modifier = {
			job_colonist_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_ascension_perk = ap_voidborn 
			}
		}
		modifier = {
			planet_max_buildings_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_hive_empire = yes 
			}
		}
		job_synapse_drone_add = 2
		planet_amenities_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_machine_empire = yes 
			}
		}
		job_coordinator_add = 1
		job_replicator_add = 1
		job_maintenance_drone_add = 2
		planet_amenities_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				has_active_tradition = tr_synthetics_finish_machine
			}
		}
		modifier = {
			job_replicator_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_cybernetics_organ_harvesting 
			}
			has_current_purge = yes
			growing_species = { 
				has_trait = trait_cybernetic 
			}
		}
		pop_growth_speed = 0.10
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin = origin_void_dwellers
				is_regular_empire = yes
			}
		}
		text = job_colonist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_origin = origin_void_dwellers
				}
				is_regular_empire = yes
			}
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		text = job_roboticist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_authority = auth_corporate
				NOT = { 
					has_origin = origin_void_dwellers 
				}
			}
		}
		text = job_executive_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_machine_empire = yes 
			}
		}
		text = job_coordinator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_machine_empire = yes 
			}
		}
		text = job_replicator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_machine_empire = yes 
			}
		}
		text = job_maintenance_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_hive_empire = yes 
			}
		}
		text = job_synapse_drone_effect_desc
	}

	upgrades = {
		"building_hab_major_capital"
	}

	# 莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_origin= origin_AL_Sierlint 
			}
		}
		modifier = {
			job_AL_head_majyo_add = 2
		}
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}
}

building_hab_major_capital = {
	base_buildtime = @b2_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	icon = building_major_capital

	category = government

	potential = {
		uses_habitat_capitals = yes
		exists = owner
		owner = { is_fallen_empire = no }
	}

	convert_to = {
		building_hab_fe_capital
	}

	allow = {
		OR = {
			PR_trgr_plnt_HC_MORE = { 
				HC = 10 
			}
			num_pops >= 10
		}
	}

	resources = {
		category = planet_buildings_hab_capital
		cost = {
			minerals = @b2_minerals
		}
		upkeep = {
			energy = 3
			alloys = 5
		}
		upkeep = {
			trigger = { owner = { has_active_tradition = tr_domination_adopt_void } }
			alloys = -1
		}
	}

	planet_modifier = {
		planet_housing_add = 5
		planet_amenities_add = 5
		planet_max_buildings_add = @buildings_t2
		planet_max_branch_office_buildings_add = 1
	}

	triggered_planet_modifier = {
		modifier = { planet_stability_add = 1 }
		mult = modifier:habitat_stability_add
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_prosperity_void_works }
		}
		modifier = {
			planet_max_buildings_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		job_synapse_drone_add = 3
		planet_amenities_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		job_coordinator_add = 2
		job_replicator_add = 1
		job_maintenance_drone_add = 3
		planet_amenities_add = 3
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_machine_empire = yes
				has_active_tradition = tr_synthetics_finish_machine
			}
		}
		modifier = {
			job_replicator_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_synthetics_finish }
		}
		job_roboticist_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_regular_empire = yes
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		modifier = {
			job_politician_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			has_planet_flag = toxic_knights_habitat
			exists = owner
			owner = {
				has_origin = origin_toxic_knights
			}
		}
		modifier = {
			job_knight_commander_add = 1
			job_knight_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			NOT = { has_planet_flag = toxic_knights_habitat }
			exists = owner
			owner = { has_authority = auth_corporate }
		}
		modifier = {
			job_executive_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_exalted_priesthood }
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		modifier = {
			job_politician_add = 1
			job_high_priest_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_aristocratic_elite }
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		modifier = {
			job_politician_add = 1
			job_noble_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_technocracy }
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		modifier = {
			job_head_researcher_add = 1
			job_politician_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_civic = civic_merchant_guilds }
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		modifier = {
			job_politician_add = 1
			job_merchant_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		job_enforcer_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ascension_perk = ap_voidborn }
		}
		modifier = {
			planet_max_buildings_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_capital_productivity_1 }
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner.federation
			owner = {
				is_regular_empire = yes
				federation = { has_federation_perk = culture_workers_1 }
			}
		}
		job_culture_worker_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_active_tradition = tr_cybernetics_organ_harvesting }
			has_current_purge = yes
			growing_species = { has_trait = trait_cybernetic }
		}
		pop_growth_speed = 0.10
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_exalted_priesthood
			}
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		text = job_high_priest_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_aristocratic_elite
			}
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		text = job_noble_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_merchant_guilds
			}
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		text = job_merchant_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOT = { has_authority = auth_corporate }
				is_regular_empire = yes
			}
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin = origin_toxic_knights
				NOR = {
					has_country_flag = toxoids_7011_b
					has_country_flag = toxoids_7040_b
					has_country_flag = toxoids_7130_b
				}
			}
			has_planet_flag = toxic_knights_habitat
		}
		text = job_knight_commander_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin = origin_toxic_knights
				OR = {
					has_country_flag = toxoids_7011_b
					has_country_flag = toxoids_7040_b
					has_country_flag = toxoids_7130_b
				}
			}
			has_planet_flag = toxic_knights_habitat
		}
		text = job_knight_commander_research_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin = origin_toxic_knights
			}
			has_planet_flag = toxic_knights_habitat
		}
		text = job_knight_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_active_tradition = tr_synthetics_finish }
		}
		text = job_roboticist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_authority = auth_corporate
			}
			OR = {
				NOT = { has_planet_flag = toxic_knights_habitat }
				NOT = { owner = { has_origin = origin_toxic_knights } }
			}
		}
		text = job_executive_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_enforcer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_coordinator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_replicator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_maintenance_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_synapse_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner.federation
			owner = {
				is_regular_empire = yes
				federation = { has_federation_perk = culture_workers_1 }
			}
		}
		text = job_culture_worker_effect_desc
	}

	#莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_origin= origin_AL_Sierlint }
		}
		modifier = {
			job_AL_head_majyo_add = 2
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}
}

building_imperial_capital = {
	base_buildtime = @b4_time
	capital = yes
	can_build = no
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 0

	category = government

	potential = {
		exists = owner
		owner = {
			is_regular_empire = yes
			is_galactic_emperor = yes
		}
		planet = { is_capital = yes }
	}

	convert_to = {
		building_hive_major_capital
		building_machine_system_capital
		building_system_capital
		building_hab_major_capital
		building_ancient_control_center
		building_ancient_palace
	}

	allow = {
		OR = {
			PR_trgr_plnt_HC_MORE = { 
				HC = 50 
			}
			num_pops >= 50
		}
	}

	prerequisites = {
	}

	planet_modifier = {
		job_enforcer_add = 5
		planet_housing_add = 18
		planet_amenities_add = 18
		planet_max_buildings_add = 11
		planet_max_branch_office_buildings_add = 4
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_active_tradition = tr_domination_imperious_architecture
			}
		}
		modifier = {
			planet_housing_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		job_roboticist_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = {
					has_authority = auth_corporate
					has_civic = civic_exalted_priesthood
					has_civic = civic_aristocratic_elite
					has_civic = civic_merchant_guilds
					has_civic = civic_technocracy
				}
			}
		}
		modifier = {
			job_politician_add = 6
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_authority = auth_corporate 
			}
		}
		modifier = {
			job_executive_add = 6
		}
	}


	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_exalted_priesthood 
			}
		}
		modifier = {
			job_high_priest_add = 3
			job_politician_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_aristocratic_elite 
			}
		}
		modifier = {
			job_noble_add = 3
			job_politician_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_technocracy 
			}
		}
		modifier = {
			job_head_researcher_add = 3
			job_politician_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_civic = civic_merchant_guilds 
			}
		}
		modifier = {
			job_merchant_add = 3
			job_politician_add = 3
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_1 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_2 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_technology = tech_capital_productivity_3 
			}
		}
		modifier = {
			planet_jobs_productive_upkeep_mult = 0.1
			planet_jobs_productive_produces_mult = 0.1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_active_tradition = tr_cybernetics_organ_harvesting 
			}
			has_current_purge = yes
			growing_species = { 
				has_trait = trait_cybernetic 
			}
		}
		pop_growth_speed = 0.10
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b4_minerals
		}
		upkeep = {
			energy = @b4_upkeep
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_exalted_priesthood
			}
		}
		text = job_high_priest_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_aristocratic_elite
			}
		}
		text = job_noble_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_technocracy
			}
		}
		text = job_head_researcher_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_civic = civic_merchant_guilds
			}
		}
		text = job_merchant_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOT = { 
					has_authority = auth_corporate 
				}
				is_regular_empire = yes
			}
		}
		text = job_politician_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				has_active_tradition = tr_synthetics_finish 
			}
		}
		text = job_roboticist_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_authority = auth_corporate
			}
		}
		text = job_executive_effect_desc
	}
	triggered_desc = {
		text = job_enforcer_effect_desc
	}

	#莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				 has_origin= origin_AL_Sierlint 
				}
		}
		modifier = {
			job_AL_head_majyo_add = 2
		}
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}

}

building_holo_theatres = {
	base_buildtime = @b1_time

	category = amenity

	potential = {
		NOT = {	
			has_modifier = slave_colony	
		}
		owner = { 
			is_regular_empire = yes 
		}
		OR = {
			owner = {
				NOT = { 
					is_ai = yes 
				}
			}
			AND = {
				NOT = { 
					has_available_jobs = entertainer 
				}
				NOT = { 
					has_forbidden_jobs = entertainer 
				}
			}
		}
		NOT = { 
			has_building = building_low_tech_capital 
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { 
				is_regular_empire = no 
			}
			has_modifier = slave_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOT = { 
					has_valid_civic = civic_warrior_culture 
				}
			}
		}
		modifier = {
			job_entertainer_add = @b1_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_warrior_culture
			}
		}
		modifier = {
			job_duelist_add = @b1_jobs
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	upgrades = {
		"building_hyper_entertainment_forum"
	}

	prerequisites = {
		"tech_holo_entertainment"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOT = { has_valid_civic = civic_warrior_culture }
			}
		}
		text = job_entertainer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_valid_civic = civic_warrior_culture
			}
		}
		text = job_duelist_effect_desc
	}
	
	#莉莉修改		
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				has_origin= origin_AL_Sierlint 
			}
		}
		modifier = {
			job_AL_head_majyo_add = 3
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = { 
					has_valid_civic = civic_warrior_culture 
					has_origin = origin_AL_kanba
				}
			}
		}
		modifier = {
			job_entertainer_add = @b1_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_origin = origin_AL_kanba
			}
		}
		modifier = {
			job_AL_unicorn_add = @b1_jobs
		}
	}
	
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOR = { 
					has_valid_civic = civic_warrior_culture 
					has_origin = origin_AL_kanba
				}
			}
		}
		text = job_entertainer_effect_desc
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin = origin_AL_kanba
			}
		}
		text = job_AL_unicorn_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_origin= origin_AL_Sierlint
			}
		}
		text = job_AL_head_majyo_effect_desc
	}
}

building_hyper_entertainment_forum = {
	base_buildtime = @b2_time
	can_build = no

	category = amenity

	potential = {
		has_building = building_holo_theatres
	}

	allow = {
		has_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { 
				is_regular_empire = no 
			}
			has_modifier = slave_colony
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOT = { 
					has_valid_civic = civic_warrior_culture 
				}
			}
		}
		modifier = {
			job_entertainer_add = @b2_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_valid_civic = civic_warrior_culture
			}
		}
		modifier = {
			job_duelist_add = @b2_jobs
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
	}

	prerequisites = {
		"tech_hyper_entertainment_forum"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				NOT = { 
					has_valid_civic = civic_warrior_culture 
				}
			}
		}
		text = job_entertainer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = {
				has_valid_civic = civic_warrior_culture
			}
		}
		text = job_duelist_effect_desc
	}

	#莉莉修改
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = { 
					has_valid_civic = civic_warrior_culture 
					has_origin = origin_AL_kanba
				}
			}
		}
		modifier = {
			job_entertainer_add = @b2_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				NOR = { 
					has_valid_civic = civic_warrior_culture 
					has_origin = origin_AL_kanba
				}
			}
		}
		modifier = {
			job_duelist_add = @b2_jobs
		}
	}

}

building_clinic = {
	base_buildtime = @b1_time
	base_cap_amount = 1

	category = amenity

	potential = {
		owner = {
			OR = {
				is_regular_empire = yes
				AND = {
					has_origin = origin_fear_of_the_dark
					is_country_type = primitive
				}
			}
		}
		NOT = { 
			has_modifier = slave_colony 
		}
	}

	destroy_trigger = {
		exists = owner
		OR = {
			owner = { 
				NOR = {
					is_regular_empire = yes
					AND = {
						has_origin = origin_fear_of_the_dark
						is_country_type = primitive
					}
					has_origin = origin_AL_irma
				}
			}
			has_modifier = slave_colony
			AND = {
				buildings_stop_pop = yes
				owner = { 
					is_ai = yes
				}
			}
		}
	}

	#伊尔马转换
	convert_to = { 
		building_irma_pop 
	}

	planet_modifier = {
		job_healthcare_add = 2
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	prerequisites = {
		"tech_frontier_health"
	}

	upgrades = {
		"building_hospital"
	}

	triggered_desc = {
		text = job_healthcare_effect_desc
	}

	on_destroy = {
		owner = {
			if = {
				limit = {
					has_event_chain = payback_out_of_warranty_chain
				}
				end_event_chain = payback_out_of_warranty_chain
			}
		}
	}

	on_repaired = {
		if = {
			limit = {
				owner = {
					has_event_chain = payback_out_of_warranty_chain
				}
			}
			random_list = {
				50 = { # still broken
					planet.owner = {
						country_event = { 
							id = origin.4302 
						}
					}
				}
				20 = { # repaired
					planet.owner = {
						country_event = { 
							id = origin.4301 
						}
					}
					modifier = {
						factor = 2
						planet.owner = { 
							num_research_agreements = 1 
						}
					}
					modifier = {
						factor = 3
						planet.owner = { 
							num_research_agreements = 2 
						}
					}
					modifier = {
						factor = 4
						planet.owner = { 
							num_research_agreements >= 3 
						}
					}
				}
				10 = { # broken beyond repair
					planet = {
						planet_event = { 
							id = origin.4303 
						}
					}
				}
			}
		}
	}

}

building_precinct_house = {
	base_buildtime = @b1_time
	
	category = government
	
	potential = {
		owner = { 
			is_regular_empire = yes 
			NOT = { 
				has_origin = origin_AL_sagamihara
			} 
		}
		NOT = { 
			has_modifier = slave_colony 
		}
	}
	
	allow = {
		hidden_trigger = {
			OR = {
				owner = { 
					is_ai = no
				}
				AND = {
					planet_crime > 15
					NOR = {
						AND = {
							has_building = building_precinct_house
							owner = { 
								has_technology = tech_colonial_centralization 
							}
						}
						has_building = building_hall_judgment
						num_buildings = { 
							type = building_precinct_house 
							value = 3 
						}
					}
				}
			}
		}
	}
	
	destroy_trigger = {
		exists = owner
		OR = {
			NOT = {	
				owner = { 
					is_regular_empire = yes 
				}	
			}
			AND = {
				owner = { 
					is_ai = yes 
				} #Players dont like random buildings blowing up
				planet = { 
					has_building = building_hall_judgment 
				}
			}#This way the AI gets to reclaim its building slots that it sunk into this expense
		}
	}
	
	planet_modifier = {
		job_enforcer_add = 2
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = 2
		}
	}
	
	prerequisites = {
		"tech_planetary_government"
	}
	
	triggered_desc = {
		text = job_enforcer_effect_desc
	}
	
	show_tech_unlock_if = {
		is_regular_empire = yes
	}
	
	upgrades = {
		building_hall_judgment
	}
}

building_research_lab_1 = {
	base_buildtime = @b1_time

	exempt_from_ai_planet_specialization = no

	category = research

	potential = {
		NOR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = crucible_colony
			owner = { 
				has_origin = origin_AL_Sierlint 
			}
		}
	}

	destroy_trigger = {
		OR = {
			has_modifier = resort_colony
			has_modifier = slave_colony
			has_modifier = crucible_colony
			owner = { 
				has_origin = origin_AL_Sierlint 
			}
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_regular_empire = yes 
			}
		}
		modifier = {
			job_researcher_add = @b1_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_hive_empire = yes 
			}
		}
		modifier = {
			job_brain_drone_add = @b1_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { 
				is_machine_empire = yes 
			}
		}
		modifier = {
			job_calculator_add = @b1_jobs
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b1_minerals
		}
		upkeep = {
			energy = @b1_upkeep
		}
	}

	upgrades = {
		"building_research_lab_2"
		#   |PR转化|
		PR_BLDN_Tech_lab_T2
	}

	prerequisites = {
		"tech_basic_science_lab_1"
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_regular_empire = yes 
			}
		}
		text = job_researcher_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_hive_empire = yes 
			}
		}
		text = job_brain_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { 
				is_machine_empire = yes 
			}
		}
		text = job_calculator_effect_desc
	}
}